import{d as f,S as g,P as x,H as S,W as M,C as R,c as m,M as u}from"./three.module-DI-f1AAC.js";import{A as v}from"./ARButton-CkA1wH0C.js";let l,a,i,e,w,p;const h=new f;let s=null;H();function H(){l=document.createElement("div"),document.body.appendChild(l),i=new g,a=new x(70,window.innerWidth/window.innerHeight,.01,20);const d=new S(16777215,12303359,3);d.position.set(.5,1,.25),i.add(d),e=new M({antialias:!0,alpha:!0}),e.setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e.setAnimationLoop(y),e.xr.enabled=!0,l.appendChild(e.domElement),e.xr.addEventListener("sessionstart",async()=>{const t=e.xr.getSession();if(!t)return;const n=await t.requestReferenceSpace("viewer");n&&(t.requestHitTestSource({space:n}).then(o=>{s=o,console.log("HitTestSource initialized:",s)}),t.addEventListener("end",()=>{s=null}))}),document.body.appendChild(v.createButton(e,{requiredFeatures:["hit-test"]}));const r=new R(.1,.1,0,32).translate(0,.1,0),c=new m({color:16777215*Math.random()});p=new u(r,c),i.add(p),w=e.xr.getController(0),w.addEventListener("select",t=>{const n=new m({color:16777215*Math.random()}),o=new u(r,n);o.position.setFromMatrixPosition(h),o.quaternion.setFromRotationMatrix(h),i.add(o)}),i.add(w),window.addEventListener("resize",P)}function P(){a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight)}function y(d,r){if(!r)return;const c=e.xr.getReferenceSpace();if(!s)return;const t=r.getHitTestResults(s);if(t.length>0){const n=t[0].getPose(c);h.fromArray(n.transform.matrix)}e.render(i,a)}
